<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="description"
            content="Get started with Add-on development using JavaScript with Document Sandbox Runtime"
        />
        <meta name="keywords" content="Adobe, Express, Add-On, JavaScript, Document Sandbox Runtime" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="styles/styles.css" />
        <title>Get Started</title>
    </head>
    <body>
        <!-- 
            Please note that this document does not use the spectrum web components theme for Express.
            You may use "addOnUISdk.app.ui.theme" to get the current theme and style accordingly.
        -->
        <div class="container">
            <button id="createRectangle" disabled>Generate QR Code</button>
        </div>

        <form id="qrForm" onsubmit="generateResponse(event)">
            <label for="qrCodeURL">QR Code URL:</label>
            <input type="url" id="qrCodeURL" name="qrCodeURL" required/> <br><br>
            <label for="qrAesthetic">QR Code Aesthetic:</label>
            <input type="text" id="qrAesthetic" name="qrAesthetic" required/> <br><br>
            <button type="submit">Generate</button>
            <input type="reset" value="Reset" />
        </form>

        <div id="result"></div>

        <script>
            async function generateResponse(event) {
                event.preventDefault();
                
                const url = document.getElementById('qrCodeURL').value;
                const aesthetic = document.getElementById('qrAesthetic').value;
                
                try {
                    const response = await fetch('http://localhost:5000/generate-qr', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            url: url,
                            aesthetic: aesthetic
                        })
                    });
                    
                    const data = await response.json();
                    document.getElementById('result').innerHTML = `
                        <h3>Generated QR Code Style:</h3>
                        <pre>${JSON.stringify(JSON.parse(data.style), null, 2)}</pre>
                    `;
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('result').innerHTML = 'Error generating QR code style';
                }
            }
        </script>

        <script type="module" src="ui/index.js"></script>
    </body>
</html>
